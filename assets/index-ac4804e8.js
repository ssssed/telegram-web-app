import{j as e,r as m,u as x,a as j,s as f}from"./index-b411665d.js";import{u as g,a as h}from"./useReduxToolkit-d8d9226e.js";const N=a=>{const t=a.getHours(),s=a.getMinutes();return`${t}:${s}`},v=()=>window.Telegram.WebApp;const y=({avatar:a,name:t,order:s,onClick:n})=>e.jsxs("div",{className:"chat-header",children:[e.jsx("img",{className:"chat-header__img",src:a}),e.jsxs("div",{className:"chat-header__info",children:[e.jsx("h3",{className:"chat-header__title",children:t}),e.jsxs("p",{className:"chat-header__text",children:["работает над заявкой ",s]})]}),e.jsx("button",{className:"chat-header__button",onClick:n,children:"Вернуться"})]}),C="/telegram-web-app/assets/clip-55921f01.svg";const b=({onChange:a})=>{const t=m.useRef(null),s=()=>{var n;t&&((n=t.current)==null||n.click())};return e.jsxs("div",{className:"chat-file",children:[e.jsx("input",{type:"file",onChange:a,ref:t,style:{display:"none"}}),e.jsx("img",{className:"chat-file__img",onClick:s,src:C,alt:"clip"})]})};const M=({file_name:a,message:t,className:s,children:n})=>e.jsxs("div",{className:`chat-message chat-message${s}`,children:[e.jsxs("div",{className:"chat-message__info",children:[e.jsx("p",{className:"chat-message__text",children:t}),e.jsx("span",{className:"chat-message__file-name",children:a})]}),n]});const $=({children:a,onClick:t})=>e.jsx("button",{className:"chat-message__button",onClick:t,children:a}),d=({children:a,prefix:t,time:s})=>e.jsxs("div",{className:"chat-message__status",children:[e.jsx("span",{className:`chat-message__time chat-message__time${t}`,children:s}),a]}),k=()=>{const a=x(),t=g(),s=()=>{t(j()),a("/")},{selectedChat:n}=h(c=>c.chat);return e.jsx(y,{avatar:n.user_avatar,name:n.user_name,order:n.title,onClick:s})},w="_container_ihc8h_1",F="_content_ihc8h_9",D="_input_ihc8h_19",W="_send_ihc8h_28",o={container:w,content:F,input:D,send:W},I=()=>{const[a,t]=m.useState(""),s=v(),n=g(),c=r=>t(r.target.value),i=r=>{var l;console.log((l=r.target.files)==null?void 0:l.item(0))},p=async r=>{var u;r.preventDefault();const l=N(new Date),_={message:a,time:l,author:((u=s.initDataUnsafe.user)==null?void 0:u.username)||"user"};n(f(_)),t("")};return e.jsxs("form",{className:o.container,onSubmit:p,children:[e.jsxs("div",{className:o.content,children:[e.jsx("input",{className:o.input,placeholder:"Напишите сообщение",value:a,onChange:c}),e.jsx(b,{onChange:i})]}),e.jsx("button",{type:"submit",className:o.send,children:"Отправить"})]})},S="/telegram-web-app/assets/checkmark-1f343b7b.svg",A=({hasFile:a,isMyMessage:t,prefix:s,time:n})=>a?e.jsx($,{children:"Посмотреть файл"}):t?e.jsx(d,{prefix:s,time:n,children:e.jsx("img",{className:"chat-message__img",src:S,alt:"checkmark"})}):e.jsx(d,{prefix:s,time:n});const H=m.memo(()=>{const{messages:a}=h(s=>s.chat),{selectedChat:t}=h(s=>s.chat);return e.jsx("div",{className:"messages",children:a.map(s=>{const n=s.author!==t.user_name,c=!!s.file_name,i=n?"_my":"_intervier";return e.jsx(M,{className:i,message:s.message,author:s.author,time:s.time,file_name:s.file_name,children:e.jsx(A,{prefix:i,time:s.time,isMyMessage:n,hasFile:c})},s.time)})})});const E=()=>e.jsxs("div",{className:"chat",children:[e.jsx(k,{}),e.jsx("hr",{color:"#d9d9d9"}),e.jsx(H,{}),e.jsx(I,{})]});export{E as default};
